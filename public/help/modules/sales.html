<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sales & Invoicing - PBM Help Center</title>
  <link rel="stylesheet" href="../css/help.css">
</head>
<body>
  <div class="help-container">
    <!-- Sidebar Navigation -->
    <aside class="help-sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
            <rect width="40" height="40" rx="8" fill="white" fill-opacity="0.2"/>
            <path d="M20 8L30 14V26L20 32L10 26V14L20 8Z" stroke="white" stroke-width="2" fill="none"/>
            <circle cx="20" cy="20" r="5" fill="white"/>
          </svg>
          <h1>PBM Help</h1>
        </div>
        <p class="sidebar-subtitle">Al Ramrami Trading Enterprises</p>
      </div>

      <nav class="nav-section">
        <div class="nav-section-title">Modules</div>
        <ul class="nav-menu">
          <li class="nav-item"><a href="customers.html" class="nav-link">Customer Management</a></li>
          <li class="nav-item"><a href="suppliers.html" class="nav-link">Supplier Management</a></li>
          <li class="nav-item"><a href="inventory.html" class="nav-link">Inventory Management</a></li>
          <li class="nav-item"><a href="contracts.html" class="nav-link">Contract Rate System</a></li>
          <li class="nav-item"><a href="sales.html" class="nav-link active">Sales & Invoicing</a></li>
          <li class="nav-item"><a href="purchase.html" class="nav-link">Purchase Orders</a></li>
          <li class="nav-item"><a href="petty-cash.html" class="nav-link">Petty Cash System</a></li>
          <li class="nav-item"><a href="wastage.html" class="nav-link">Wastage Management</a></li>
          <li class="nav-item"><a href="reports.html" class="nav-link">Reports & Analytics</a></li>
        </ul>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="help-main">
      <header class="help-header">
        <div class="help-header-content">
          <nav class="breadcrumb">
            <a href="../index.html">Help Center</a>
            <span class="breadcrumb-separator">/</span>
            <span>Modules</span>
            <span class="breadcrumb-separator">/</span>
            <span>Sales & Invoicing</span>
          </nav>
        </div>
      </header>

      <div class="help-content">
        <h1>Sales & Invoicing</h1>
        <p class="lead">
          Create sales orders with FIFO inventory tracking, generate invoices, and track payments.
          The Sales module integrates with the Contract Rate System and provides real-time
          profit analysis through FIFO cost allocation.
        </p>

        <div class="callout note">
          <div class="callout-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
            </svg>
          </div>
          <div class="callout-content">
            <div class="callout-title">Who Can Access</div>
            <p style="margin:0;"><span class="role-badge sales">Sales Staff</span>, <span class="role-badge manager">Managers</span>, and <span class="role-badge admin">Administrators</span>.</p>
          </div>
        </div>

        <!-- Sales Order Overview -->
        <section>
          <h2>Sales Order Overview</h2>
          <p>A sales order documents a customer's purchase of materials. It includes:</p>
          <ul>
            <li>Customer and delivery location</li>
            <li>Materials and quantities ordered</li>
            <li>Pricing (market or contract rates)</li>
            <li>Delivery date and payment terms</li>
          </ul>
        </section>

        <!-- Creating Sales Order -->
        <section>
          <h2>Creating a Sales Order</h2>
          <ol class="steps">
            <li class="step">
              <div class="step-title">Navigate to Sales Orders</div>
              <div class="step-content">
                <p>Go to <strong>Sales â†’ Sales Orders</strong> and click <strong>+ New Order</strong>.</p>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Select Customer</div>
              <div class="step-content">
                <p>Choose the customer from the dropdown. If they have an active contract, it will be shown.</p>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Select Delivery Location</div>
              <div class="step-content">
                <p>Choose where the materials will be delivered. This affects contract rate lookup.</p>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Add Materials</div>
              <div class="step-content">
                <p>Click <strong>+ Add Item</strong> to add materials:</p>
                <ul>
                  <li>Select material from the list</li>
                  <li>Enter quantity</li>
                  <li>Price is auto-calculated based on contract or market rate</li>
                </ul>
                <div class="callout tip">
                  <div class="callout-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                    </svg>
                  </div>
                  <div class="callout-content">
                    <div class="callout-title">Contract Rate Indicators</div>
                    <p style="margin:0;">
                      <span style="color:#22c55e;">Green</span> = Contract rate applies (customer saves)<br>
                      <span style="color:#f59e0b;">Yellow</span> = Contract expiring soon<br>
                      <span style="color:#ef4444;">Red</span> = Contract expired, market rate used
                    </p>
                  </div>
                </div>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Set Delivery Details</div>
              <div class="step-content">
                <ul>
                  <li><strong>Delivery Date:</strong> Expected delivery date</li>
                  <li><strong>Payment Terms:</strong> Cash, Credit, or specific payment period</li>
                  <li><strong>Notes:</strong> Any special instructions</li>
                </ul>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Preview FIFO Allocation (Optional)</div>
              <div class="step-content">
                <p>Click <strong>Preview FIFO</strong> to see:</p>
                <ul>
                  <li>Which inventory batches will be used (oldest first)</li>
                  <li>Cost of Goods Sold (COGS) calculation</li>
                  <li>Gross margin and profit percentage</li>
                  <li>Warnings if stock is insufficient</li>
                </ul>
                <div class="callout tip">
                  <div class="callout-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <circle cx="12" cy="12" r="10"/>
                    </svg>
                  </div>
                  <div class="callout-content">
                    <div class="callout-title">FIFO Preview</div>
                    <p style="margin:0;">
                      FIFO (First-In, First-Out) ensures older inventory is sold first.
                      The preview shows exact batch allocations before you commit to the order.
                    </p>
                  </div>
                </div>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Save Order</div>
              <div class="step-content">
                <p>Click <strong>Save Order</strong>. The order is created with "Draft" status.</p>
              </div>
            </li>
          </ol>
        </section>

        <!-- FIFO Inventory Tracking -->
        <section>
          <h2>FIFO Inventory Tracking</h2>
          <p>When a sales order is marked as <strong>Delivered</strong>, the system automatically:</p>
          <ul>
            <li>Consumes inventory from the oldest batches first (FIFO)</li>
            <li>Records Cost of Goods Sold (COGS) for each item</li>
            <li>Creates batch movement records for audit trail</li>
            <li>Updates transaction history</li>
          </ul>

          <div class="callout note">
            <div class="callout-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
              </svg>
            </div>
            <div class="callout-content">
              <div class="callout-title">Why FIFO Matters</div>
              <p style="margin:0;">
                FIFO ensures accurate cost tracking for each sale. You'll know exactly which batches
                (at their specific purchase costs) were used, enabling precise profit analysis.
              </p>
            </div>
          </div>
        </section>

        <!-- Order Statuses -->
        <section>
          <h2>Sales Order Statuses & Lifecycle</h2>
          <p>Sales orders follow a specific lifecycle. Use the quick action buttons in the table to progress orders:</p>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th>Status</th>
                  <th>Description</th>
                  <th>Quick Actions</th>
                  <th>Can Delete?</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><span style="background:#e0e7ff;color:#4f46e5;padding:2px 8px;border-radius:4px;">Draft</span></td>
                  <td>Order created, not yet confirmed</td>
                  <td>View, Edit, Confirm âœ“, Cancel âœ•</td>
                  <td><span style="color:#22c55e;">âœ“ Yes</span></td>
                </tr>
                <tr>
                  <td><span style="background:#dbeafe;color:#1d4ed8;padding:2px 8px;border-radius:4px;">Confirmed</span></td>
                  <td>Order confirmed, inventory reserved</td>
                  <td>View, Edit, Deliver ðŸšš, Cancel âœ•, Invoice ðŸ“„</td>
                  <td><span style="color:#dc2626;">âœ— No</span></td>
                </tr>
                <tr>
                  <td><span style="background:#dcfce7;color:#16a34a;padding:2px 8px;border-radius:4px;">Delivered</span></td>
                  <td>Materials delivered, inventory reduced (FIFO)</td>
                  <td>View, Invoice ðŸ“„</td>
                  <td><span style="color:#dc2626;">âœ— No</span></td>
                </tr>
                <tr>
                  <td><span style="background:#fee2e2;color:#dc2626;padding:2px 8px;border-radius:4px;">Cancelled</span></td>
                  <td>Order cancelled, inventory released</td>
                  <td>View</td>
                  <td><span style="color:#22c55e;">âœ“ Yes</span></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="callout warning">
            <div class="callout-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86"/>
              </svg>
            </div>
            <div class="callout-content">
              <div class="callout-title">Delete Restrictions</div>
              <p style="margin:0;">
                Only <strong>Draft</strong> and <strong>Cancelled</strong> orders can be deleted.
                Confirmed and Delivered orders are protected because they have inventory implications.
                If you need to undo a delivered order, cancel it first.
              </p>
            </div>
          </div>
        </section>

        <!-- Order Lifecycle Workflow -->
        <section>
          <h2>Order Workflow</h2>
          <div class="card">
            <h3>Standard Order Flow</h3>
            <div style="text-align:center;padding:1rem;background:#f8fafc;border-radius:8px;margin:1rem 0;">
              <span style="background:#e0e7ff;color:#4f46e5;padding:4px 12px;border-radius:4px;">Draft</span>
              <span style="margin:0 0.5rem;">â†’</span>
              <span style="background:#dbeafe;color:#1d4ed8;padding:4px 12px;border-radius:4px;">Confirmed</span>
              <span style="margin:0 0.5rem;">â†’</span>
              <span style="background:#dcfce7;color:#16a34a;padding:4px 12px;border-radius:4px;">Delivered</span>
              <span style="margin:0 0.5rem;">â†’</span>
              <span style="background:#fef3c7;color:#ca8a04;padding:4px 12px;border-radius:4px;">Invoice</span>
            </div>
            <ul>
              <li><strong>Draft â†’ Confirmed:</strong> Reserves inventory quantities (not yet consumed)</li>
              <li><strong>Confirmed â†’ Delivered:</strong> Triggers FIFO allocation - inventory is actually consumed</li>
              <li><strong>Delivered â†’ Invoice:</strong> Generate invoice for payment collection</li>
            </ul>
          </div>
        </section>

        <!-- Generating Invoices -->
        <section>
          <h2>Generating Invoices</h2>
          <p>Once an order is confirmed or delivered, you can generate an invoice:</p>

          <ol class="steps">
            <li class="step">
              <div class="step-title">Open Order</div>
              <div class="step-content">
                <p>Navigate to the confirmed/delivered order.</p>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Click Generate Invoice</div>
              <div class="step-content">
                <p>Click the <strong>Generate Invoice</strong> button.</p>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Review Invoice Details</div>
              <div class="step-content">
                <ul>
                  <li>Invoice number is auto-generated</li>
                  <li>Verify amounts and taxes</li>
                  <li>Add any additional notes</li>
                </ul>
              </div>
            </li>

            <li class="step">
              <div class="step-title">Save and Print/Export</div>
              <div class="step-content">
                <p>Save the invoice. You can then print or export as PDF to send to the customer.</p>
              </div>
            </li>
          </ol>
        </section>

        <!-- Contract Rate Application -->
        <section>
          <h2>Contract Rate Application</h2>
          <p>When creating a sales order, the system automatically applies contract rates:</p>

          <div class="card">
            <h3>How It Works</h3>
            <ol>
              <li>System checks if customer has an active contract</li>
              <li>Verifies if the selected location is covered</li>
              <li>Looks up rate for each material added</li>
              <li>Applies the appropriate rate type (fixed, discount, or minimum guarantee)</li>
              <li>Shows comparison with market rate</li>
            </ol>
          </div>

          <div class="callout warning">
            <div class="callout-icon">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86"/>
              </svg>
            </div>
            <div class="callout-content">
              <div class="callout-title">Expired Contracts</div>
              <p style="margin:0;">If a contract is expired, the system warns you and uses market rates. Check with management before proceeding if the customer expects contract pricing.</p>
            </div>
          </div>
        </section>

        <!-- Best Practices -->
        <section>
          <h2>Best Practices</h2>
          <div class="card">
            <ul>
              <li><strong>Verify customer details:</strong> Confirm delivery address before creating orders</li>
              <li><strong>Check inventory:</strong> Ensure stock is available before promising delivery</li>
              <li><strong>Review contract rates:</strong> Verify pricing looks correct based on agreements</li>
              <li><strong>Complete orders promptly:</strong> Don't leave orders in draft status</li>
              <li><strong>Generate invoices timely:</strong> Create invoices immediately after delivery</li>
            </ul>
          </div>
        </section>

        <!-- Quick Links -->
        <div class="quick-links">
          <h4>Related Topics</h4>
          <div class="quick-links-grid">
            <a href="customers.html" class="quick-link">Customer Management</a>
            <a href="contracts.html" class="quick-link">Contract Rate System</a>
            <a href="inventory.html" class="quick-link">Inventory Management</a>
          </div>
        </div>

        <footer class="help-footer">
          <p>PBM Help Center - Al Ramrami Trading Enterprises</p>
        </footer>
      </div>
    </main>
  </div>
</body>
</html>
